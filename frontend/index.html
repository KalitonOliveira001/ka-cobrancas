<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KADados - Gerenciamento de Cobranças</title>
    <!-- Inclui o Tailwind CSS para estilização rápida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc; /* gray-100 */
        }
        .container-center {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 30px;
            width: 100%;
            max-width: 500px;
        }
        .input-field {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-top: 5px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }
        .input-field:focus {
            border-color: #3182ce; /* blue-600 */
            outline: none;
        }
        .btn-primary {
            width: 100%;
            padding: 12px;
            background-color: #3182ce; /* blue-600 */
            color: white;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #2c5282; /* blue-800 */
        }
        .form-message {
            font-size: 14px;
        }
        .action-button {
            padding: 5px 10px;
            border-radius: 6px;
            color: white;
            font-size: 14px;
        }
        /* Estilização da tabela */
        .table-container {
            overflow-x: auto;
            max-width: 100%;
        }
        .table-auto {
            width: 100%;
            border-collapse: collapse;
        }
        .table-auto th, .table-auto td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        .table-auto th {
            background-color: #f7fafc;
            font-weight: 600;
            color: #4a5568;
            border-top: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>

    <!-- Cabeçalho Global (Visível em ambas as telas) -->
    <header class="bg-blue-600 p-4 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold text-white">KADados - Gerenciamento de Cobranças</h1>
            <button id="logout-button" onclick="showAuthScreen()" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg hidden">Sair</button>
        </div>
    </header>


    <!-- ------------------------------------------------------------------------- -->
    <!-- CONTAINER DE AUTENTICAÇÃO (Login e Cadastro) - Aparece no início -->
    <!-- ------------------------------------------------------------------------- -->
    <div id="auth-container" class="container-center">
        <div class="card">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-6" id="auth-title">Faça Login</h2>

            <!-- Seção de Login -->
            <section id="login-section">
                <form id="login-form">
                    <div>
                        <label for="login-email" class="block text-sm font-medium text-gray-700">Email</label>
                        <input type="email" id="login-email" name="email" class="input-field" required>
                    </div>
                    <div>
                        <label for="login-password" class="block text-sm font-medium text-gray-700">Senha</label>
                        <input type="password" id="login-password" name="password" class="input-field" required>
                    </div>
                    <button type="submit" class="btn-primary">Entrar</button>
                </form>
            </section>

            <!-- Seção de Cadastro (Inicialmente oculta) -->
            <section id="register-section">
                <form id="register-form">
                    <div>
                        <label for="register-name" class="block text-sm font-medium text-gray-700">Nome</label>
                        <input type="text" id="register-name" name="name" class="input-field" required>
                    </div>
                    <div>
                        <label for="register-email" class="block text-sm font-medium text-gray-700">Email</label>
                        <input type="email" id="register-email" name="email" class="input-field" required>
                    </div>
                    <div>
                        <label for="register-password" class="block text-sm font-medium text-gray-700">Senha</label>
                        <input type="password" id="register-password" name="password" class="input-field" required>
                    </div>
                    <button type="submit" class="btn-primary bg-green-500 hover:bg-green-600">Cadastrar</button>
                </form>
            </section>

            <!-- Mensagem para alternar entre Login/Cadastro -->
            <p class="text-sm text-center mt-6 text-gray-600">
                <span id="auth-message">Não tem uma conta?</span>
                <a href="#" id="switch-link" class="text-blue-600 hover:text-blue-800 font-medium">Cadastre-se</a>
            </p>
        </div>
    </div>
    
    <!-- ------------------------------------------------------------------------- -->
    <!-- CONTAINER PRINCIPAL DO APP (Tela de Clientes) - Inicialmente oculta -->
    <!-- ------------------------------------------------------------------------- -->
    <div id="app-container" style="display:none;" class="max-w-6xl mx-auto p-4 md:p-8 mt-10">
        <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Gerenciamento de Clientes</h2>
            
            <div class="flex justify-between items-center mb-6">
                <button onclick="listarClientes()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-150 ease-in-out">
                    Recarregar Clientes
                </button>
                <button class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-150 ease-in-out">
                    Adicionar Novo Cliente
                </button>
            </div>

            <!-- Tabela de Clientes -->
            <div class="table-container">
                <table class="table-auto min-w-full">
                    <thead>
                        <tr>
                            <th class="w-1/12">ID</th>
                            <th class="w-4/12">Nome</th>
                            <th class="w-4/12">Email</th>
                            <th class="w-3/12 text-center">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="clientes-tabela-corpo">
                        <!-- Linhas de clientes serão inseridas aqui pelo JavaScript -->
                        <tr><td colspan="4" class="text-center py-4 text-gray-500">Faça login para ver a lista de clientes.</td></tr>
                    </tbody>
                </table>
            </div>
            
        </div>
    </div>


    <!-- Link para o arquivo JavaScript (app.js) -->
    <script src="./app.js"></script>
    
    <script>
        // Quando a tela do app é mostrada, garante que o botão Sair apareça.
        function showAppScreen() {
            logado = true; 
            document.getElementById('auth-container').style.display = 'none';
            document.getElementById('app-container').style.display = 'block';
            document.getElementById('logout-button').classList.remove('hidden'); // Mostra o botão Sair
            listarClientes(); 
        }

        // Quando a tela de autenticação é mostrada, garante que o botão Sair suma.
        function showAuthScreen() {
            logado = false;
            authToken = null;
            document.getElementById('auth-container').style.display = 'block';
            document.getElementById('app-container').style.display = 'none';
            document.getElementById('logout-button').classList.add('hidden'); // Esconde o botão Sair
        }
    </script>
</body>
</html>